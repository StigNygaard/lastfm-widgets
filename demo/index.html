<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en" xml:lang="en">
<head prefix="og: http://ogp.me/ns#">
  <meta charset="UTF-8" />
  <title>last.fm widget demo and play site</title>
  <link rel="stylesheet" href="demo.css" />
  <script src="widgets/lastfm.js" type="module"></script>
  <script src="demo.js" type="module"></script>

  <meta property="og:site_name" content="last.fm widget demo and play site" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://lastfm-widgets.deno.dev/" />
  <meta name="description" content="Customizable last.fm scrobbles widget. Show your last played tracks on your homepage or blog using this easy to use and configurable website widget." />
  <meta name="keywords" content="last.fm,lastfm,scrobbles,scrobble,scrobbling,audioscrobbler,playlist,tracks,tracklist,recently played,play history,listening to,now playing,widget,webcomponent,javascript,Stig Nygaard,music,web-development,deno,deno deploy" />
  <meta name="dc.creator.name" content="Stig Nygaard" />
  <meta name="dc.language" content="en" />
  <meta name="author" content="Stig Nygaard" />
  <meta name="publisher" content="Stig Nygaard" />
</head>
<body>

<div class="demo">
  <div class="info">
    <h1>ðŸ”´ Last.fm <em>Tracks</em> widget</h1>
    <p><i>By <a href="https://www.rockland.dk/" title="Homepage of Stig Nygaard">Stig Nygaard</a>.</i></p>
    <p><strong>This page is <em>Work In Progress!...</em></strong></p>

    <p>This page is a simple demonstration of
      <a href="https://github.com/StigNygaard/lastfm-widgets" title="GitHub repository">my Last.fm <em>Tracks</em> widget</a>
      showing recent "scrobbles" from a last.fm account. I plan to make this page a place where you can play with
      configuration of the widget, but that is not fully ready yet. For now, just some quick basics...</p>

    <p>To use the widget, you need to import <code>lastfm.js</code> as a module. If you do that from html, remember
      the <code>type</code> attribute:</p>

    <code>&lt;script src="lastfm.js" type="module"&gt;&lt;/script&gt;</code>

    <p>The script defines the custom html-element <code>&lt;lastfm-tracks/&gt;</code>. Simply insert such
      element on a webpage where you want a <em>Tracks</em> widget to be.</p>

    <p>When creating widget, the script will read the <code>tracks.css</code> stylesheet file, which it expects
      to find at same location as the script file itself.</p>

    <p>The widget has 3 modes. The <em>Demo</em> and <em>Basic</em> modes are "standalone" (pure frontend)
      modes where widget communicates <em>directly</em> with last.fm's API to get the "scrobbles". The third
      mode is <em>Backend-supported</em> mode where you need to have a backend "proxy-api" that the widget can
      communicate with. The idea is that the proxy-api should mirror/forward the two methods
      (<em><a href="https://www.last.fm/api/show/user.getInfo">user.getinfo</a></em> and
      <em><a href="https://www.last.fm/api/show/user.getRecentTracks">user.getrecenttracks</a></em>)
      from last.fm's audioscrobbler 2.0 api that the widget needs to function. Your own backend proxy-api is
      a very good idea, if widget is to be placed on a page with <em>more</em> than <em>absolute minimal</em>
      amount of traffic, because you can implement "throttling" in the proxy-api to prevent overwhelming
      volumes of requests being sent directly to last.fm's API.</p>

    <ol>
      <li>
        <h3>"Demo" mode</h3>
        <p>
          <code>&lt;lastfm-tracks user="your username"&gt;<wbr />&lt;/lastfm-tracks&gt;</code>
        </p>
        <p>In the "standalone" <em>Demo</em> mode, the widget is "static". Latest "scrobbles" will be loaded upon
          creation of the widget, but tracklist will <em>not</em> be refreshed after that.</p>
      </li>
      <li>
        <h3>"Basic" mode</h3>
        <p>
          <code>&lt;lastfm-tracks user="your username" apikey="your own api key" interval="60"&gt;<wbr />&lt;/lastfm-tracks&gt;</code>
        </p>
        <p>Adding your own API-key - which you can <a href="https://www.last.fm/api/authentication">get for free</a> -
          puts the widget into the <em>Basic</em> mode where it supports periodically refresh of the tracks-list.
          The <code>interval</code> attribute sets the widget's track-list refresh-rate in seconds.</p>
      </li>
      <li>
        <h3>"Backend-supported" mode</h3>
        <p>
          <code>&lt;lastfm-tracks backend="/proxy-api" interval="35"&gt;<wbr />&lt;/lastfm-tracks&gt;</code>
        </p>
        <p>Add the <code>backend</code> attribute pointing to a custom "proxy API" to enable <em>Backend-supported</em>
          mode. Depending on your proxy-api, you could also add other attributes like <code>user</code> and
          <code>apikey</code>, but you don't have to. Usually it will be smarter (and simpler) to have fixed values
          for these defined in the backend.</p>
      </li>
    </ol>

    <h2>Getting your own API key for <em>Basic</em> or <em>Backend-supported</em> mode</h2>
    <p>First go to
      <a href="https://www.last.fm/api/authentication" target="_blank">https://www.last.fm/api/authentication</a>.
      Though this page talks about <em>authentication</em> and <em>secrets</em>, you can largely ignore that. For our
      non-authenticated use of the API, you don't need a secret, but you still need an API-key connected to your
      Last.fm account. So follow the
      <a href="https://www.last.fm/api/account/create" target="_blank">"apply for a key" link</a>.
      Here you should enter an application name and description.
    </p>
    <details class="keyshot">
      <summary>I imagine something like this will be very fine:...</summary>
      <a href="https://www.last.fm/api/account/create"><img src="apply-apikey.png" alt=" [screenshot] " /></a>
    </details>

    <p>Once submitted, you should get a personal API-key which can be used for the Tracks widget, to either enable
      the widget's <em>Basic</em> mode, or use it in a proxy-api with widget in <em>Backend-supported</em> mode.</p>

  </div>
  <div class="widget">
    <div class="resizeable">
      <!-- my own backend: -->
      <lastfm-tracks backend="/proxy-api" interval="35" ></lastfm-tracks>
      <!-- demo mode: -->
<!--      <lastfm-tracks user="rockland"></lastfm-tracks> -->
      <!-- basic mode: -->
<!--      <lastfm-tracks user="rockland" interval="65" apikey="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" ></lastfm-tracks> -->

    </div>
    <button>Stop updating</button>
  </div>
  <div class="options">
    <pre class="style">
    </pre>
    <pre class="tag">
    </pre>
    <p><label><input type="checkbox" class="dynaheader" /> "Dynamic" <em>widget header</em></label></p>
    <p><label><input type="checkbox" class="hidealbums" /> Hide <em>album header-lines</em></label></p>
  </div>
</div>

</body>
</html>
